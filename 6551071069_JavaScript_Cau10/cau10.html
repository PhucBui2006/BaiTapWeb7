<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Caculator</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <style>
      body {
        text-align: center;
        margin-top: 40px;
        font-family: Arial;
      }
      table {
        margin: 0 auto;
        border-collapse: collapse;
      }
      button {
        width: 50px;
        height: 40px;
        font-size: 18px;
        margin: 3px;
      }
      input {
        width: 220px;
        height: 35px;
        font-size: 18px;
        text-align: right;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <h3>Caculator</h3>
    <input type="text" id="screen" placeholder="Nhập biểu thức..." /><br />

    <table>
      <tr>
        <td><button>7</button></td>
        <td><button>8</button></td>
        <td><button>9</button></td>
        <td><button>/</button></td>
      </tr>
      <tr>
        <td><button>4</button></td>
        <td><button>5</button></td>
        <td><button>6</button></td>
        <td><button>*</button></td>
      </tr>
      <tr>
        <td><button>1</button></td>
        <td><button>2</button></td>
        <td><button>3</button></td>
        <td><button>-</button></td>
      </tr>
      <tr>
        <td><button>0</button></td>
        <td><button>C</button></td>
        <td><button>=</button></td>
        <td><button>+</button></td>
      </tr>
    </table>
    <script>
      $("button").click(function () {
        let val = $(this).text();
        let screen = $("#screen");
        if (val === "C") {
          screen.val("");
        } else if (val === "=") {
          let expr = screen.val();
          if (/^[0-9+\-*/.]+$/.test(expr)) {
            try {
              let result = eval(expr);
              screen.val(result);
            } catch {
              alert("Biểu thức không hợp lệ!");
            }
          } else {
            alert("Biểu thức không hợp lệ!");
          }
        } else {
          screen.val(screen.val() + val);
        }
      });
      $(document).keypress(function (e) {
        let key = e.key;
        if (/^[0-9+\-*/.=]$/.test(key)) {
          if (key === "=") {
            $("#screen").val(eval($("#screen").val()));
          } else {
            $("#screen").val($("#screen").val() + key);
          }
        }
      });
    </script>
  </body>
</html>
